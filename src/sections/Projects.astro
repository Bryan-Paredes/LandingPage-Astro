---
import ProjectDetailInfoValue from "@components/ProjectDetailInfoValue.astro";
import SectionTitle from "@components/SectionTitle.astro";

const PROJECTS = [
  {
    title: "La gala de Sr. Croma",
    subtitle: "Premios a los invisibles del cine",
    description: "El evento de presentacion de blabla",
    image: "/projects/01.webp",
    link: "https://google.com",
    info: [
      {
        value: "100M",
        label: "Viewers unicos",
      },
      {
        value: "40M",
        label: "Pico de espectadores",
      },
      {
        value: "260K",
        label: "Audiencia Media",
      },
      {
        value: "5M",
        label: "Likes de Instagram",
      },
    ],
  },
  {
    title: "La gala de Sr. Croma",
    subtitle: "Premios a los invisibles del cine",
    description: "El evento de presentacion de blabla",
    image: "/projects/02.webp",
    link: "https://google.com",
    info: [
      {
        value: "100M",
        label: "Viewers unicos",
      },
      {
        value: "40M",
        label: "Pico de espectadores",
      },
      {
        value: "260K",
        label: "Audiencia Media",
      },
      {
        value: "5M",
        label: "Likes de Instagram",
      },
    ],
  },
  {
    title: "La gala de Sr. Croma",
    subtitle: "Premios a los invisibles del cine",
    description: "El evento de presentacion de blabla",
    image: "/projects/03.webp",
    link: "https://google.com",
    info: [
      {
        value: "100M",
        label: "Viewers unicos",
      },
      {
        value: "40M",
        label: "Pico de espectadores",
      },
      {
        value: "260K",
        label: "Audiencia Media",
      },
      {
        value: "5M",
        label: "Likes de Instagram",
      },
    ],
  },
  {
    title: "La gala de Sr. Croma",
    subtitle: "Premios a los invisibles del cine",
    description: "El evento de presentacion de blabla",
    image: "/projects/04.webp",
    link: "https://google.com",
    info: [
      {
        value: "100M",
        label: "Viewers unicos",
      },
      {
        value: "40M",
        label: "Pico de espectadores",
      },
      {
        value: "260K",
        label: "Audiencia Media",
      },
      {
        value: "5M",
        label: "Likes de Instagram",
      },
    ],
  },
];
---

<section>
  <SectionTitle image="proyectos" title="Proyectos" />

  <div id="project-container" class="flex bg-white z-10 relative">
    <div id="project-list" class="w-screen flex-shrink-0">
      {
        PROJECTS.map((projects, index) => (
          <article
            id="project-article"
            class="relative border-t-2 last:border-y-2 border-black"
          >
            <button data-id={index} class="group pl-[60px] ml-14 flex">
              <div
                class=" -z-20 absolute left-0 h-full w-[60px] bg-primary-green
                    group-hover:w-full transition-all duration-700 ease-project-timing"
              />
              <div
                class=" -z-10 absolute inset-0 h-full w-full bg-cover 
                    bg-center bg-no-repeat opacity-0 transition-opacity duration-700
                    ease-project-timing delay-700
                    group-hover:opacity-100"
                style={`background-image: url(${projects.image});`}
              />

              <div class="py-8">
                <h3 class="uppercase tracking-tighter text-8xl font-bold">
                  {projects.title}
                </h3>
                <h4
                  class="uppercase text-2xl text-left group-hover:opacity-0
                    transition-opacity duration-700 ease-project-timing"
                >
                  {projects.subtitle}
                </h4>
              </div>

              <div class="absolute right-0 border-l border-black h-full w-[300px] flex items-center justify-center">
                <svg
                  class="arrow text-black group-hover:text-white group-hover:translate-x-4 transition duration-700 ease-project-timing"
                  xmlns="http://www.w3.org/2000/svg"
                  width="100"
                  height="30"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-lines"
                >
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  <path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-3v-6h3z" />
                  <path d="M3 9v6" />
                  <path d="M6 9v6" />
                </svg>
              </div>
            </button>
          </article>
        ))
      }
    </div>
  </div>
  <div
    id="project-view"
    class="transition-all duration-700 ease-project-timing"
  >
    <article class="h-[776px] border-black border-y-2 flex flex-row w-screen">
      <div class="w-[55%] h-full">
        <button
          id="button-back"
          class="top-0 left-0 z-10 p-5 text-primary-green"
        >
          <svg
            width="40"
            height="40"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
              d="M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z"
            ></path><path d="M9 9l6 6m0 -6l-6 6"></path>
          </svg>
        </button>
        <header class="px-28 pt-2">
          <h2 class="text-7xl font-bold uppercase mb-12 tracking-tighter">
            La Gala del Sr. Croma <span class="text-primary-green">.</span>
          </h2>
          <p class="text-xl mb-6">
            El evento de presentacion de la nueva pelicula del Sr. Croma fue una
            noche magica que quedata en la memoria de todos lo asistente.
            Celebrado en el majestuoso Teatro Real, la velada comenzó con una
            espectacular alfombra verde donde desfilaron otros actores Croma
            mientras los flashes de las cámaras iluminaban sus máscaras
          </p>
          <p class="text-xl">
            El teatro, decorado con motivos cimnematográficos y elegantes
            detalles en dorado y verde, ofreció un ambiente de sofisticacion y
            glamour. Durante la proyección, los asistentes quedaron maravillados
            con la actuacion de Sr. Croma, cuyo carisma y talento llenaron la
            pantalla. Al final de la pelicula, una ocacion de pie resonó en la
            sala.
          </p>
        </header>
        <footer
          class="flex flex-col mt-11 bg-primary-green justify-center items-center py-5"
        >
          <div class="p-8">
            <div class="grid grid-cols-4 gap-16 text-center">
              <ProjectDetailInfoValue label="Views Unicos" value="100M" />
              <ProjectDetailInfoValue
                label="Pico de Espectadores"
                value="40M"
              />
              <ProjectDetailInfoValue label="Audiencia Media" value="360K" />
              <ProjectDetailInfoValue label="Likes en Instagram" value="5M" />
            </div>
          </div>
          <a
            class="py-4 px-14 text-primary-green bg-gray-950 uppercase font-bold text-3xl rounded-full hover:bg-white hover:text-black transition-all duration-300"
            href="#">LINK</a
          >
        </footer>
      </div>
      <figure class="w-[45%] h-full">
        <img class="h-[768px]" src="/projects/01.webp" alt="Proyecto 1" />
      </figure>
    </article>
  </div>
</section>

<style>
  .arrow {
    transition:
      transform 700ms,
      color 700ms 700ms;
  }

  #project-view {
    display: none;
    transition: all 700ms ease-in-out;
    animation: hideProject 1.5s cubic-bezier(0.61, 0.03, 0.08, 0.99) both;
  }
  #project-view.show {
    display: block;
    transition: all 700ms ease-in-out;
    animation: showProject 1.5s cubic-bezier(0.61, 0.03, 0.08, 0.99) both;
  }
  article:hover h3 {
    animation: project-title 1.5s cubic-bezier(0.61, 0.03, 0.08, 0.99) both;
  }

  #project-container {
    display: block;
    transition: all 700ms ease-in-out;
    animation: showProject 1.5s cubic-bezier(0.61, 0.03, 0.08, 0.99) both;
  }
  #project-container.slide-in {
    display: none;
    transition: all 700ms ease-in-out;
    animation: hideProject 1.5s cubic-bezier(0.61, 0.03, 0.08, 0.99) both;
  }

  @keyframes project-title {
    50% {
      transform: translateX(80px);
    }

    100% {
      color: transparent;
      -webkit-text-stroke-width: 2px;
      -webkit-text-stroke-color: white;
      transform: translateX(160px);
    }
  }

  @keyframes showProject {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  @keyframes hideProject {
    0% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }
</style>

<script>
  const $projectView = document.getElementById("project-view") as HTMLElement;
  const $projectContainer = document.getElementById(
    "project-container"
  ) as HTMLElement;
  const $projectList = document.getElementById("project-list") as HTMLElement;
  const $backButton = document.getElementById("button-back") as HTMLElement;

  const $buttons = $projectList.querySelectorAll("button");
  $buttons.forEach((button, index) => {
    button.addEventListener("click", (e) => {
      $projectView.classList.add("show");
      $projectContainer.classList.add("slide-in");
    });
  });

  $backButton.addEventListener("click", (e) => {
    $projectView.classList.remove("show");
    $projectContainer.classList.remove("slide-in");
  });
</script>
